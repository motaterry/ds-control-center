@import "tailwindcss";

:root {
  /* Dynamic Color Variables - HSL format */
  --primary-h: 114;
  --primary-s: 100%;
  --primary-l: 58%;
  --color-primary: hsl(var(--primary-h), var(--primary-s), var(--primary-l));

  --comp-h: 294;
  --comp-s: 100%;
  --comp-l: 58%;
  --color-complementary: hsl(var(--comp-h), var(--comp-s), var(--comp-l));

  /* Design System Controls */
  --button-text-color: light;
  --border-radius: 8px;
  --enable-3d: 1; /* 3D effects enabled by default */
  --logo-sticky-offset: -1.5rem; /* Specific offset for sticky logo positioning */
  --section-gap: calc(var(--spacing) * 16); /* Consistent spacing between sidebar sections */

  /* Background colors - Dark Mode Default */
  --background: 222 47% 11%;
  --foreground: 0 0% 98%;

  /* Card colors */
  --card: 222 47% 11%;
  --card-foreground: 0 0% 98%;

  /* Border and input */
  --border: 217 33% 17%;
  --input: 217 33% 17%;
  --ring: var(--color-primary);

  /* Neutral color tokens - Dark Mode */
  --neutral-50: 0 0% 98%;
  --neutral-100: 0 0% 96%;
  --neutral-200: 0 0% 90%;
  --neutral-300: 0 0% 83%;
  --neutral-400: 0 0% 64%;
  --neutral-500: 0 0% 45%;
  --neutral-600: 0 0% 32%;
  --neutral-700: 0 0% 23%;
  --neutral-800: 0 0% 15%;
  --neutral-900: 0 0% 9%;
  --neutral-950: 0 0% 3%;

  /* Component backgrounds - Dark Mode */
  --input-bg: 0 0% 15%;
  --input-border: 0 0% 25%;
  --button-outline-bg: transparent;
  --button-outline-border: 0 0% 25%;
  --button-ghost-bg-hover: 0 0% 20%;
  --switch-unchecked-bg: 0 0% 20%;
  
  /* Toast backgrounds - Dark Mode */
  --toast-default-bg: 0 0% 15%;
  --toast-default-border: 0 0% 25%;
  
  /* Text colors - Dark Mode */
  --text-primary: 0 0% 100%;
  --text-secondary: 0 0% 80%;
  --text-tertiary: 0 0% 60%;
  --text-muted: 0 0% 50%;
  --text-disabled: 0 0% 40%;
  
  /* Bar chart base colors - Dark Mode (same as primary/complementary) */
  --color-primary-chart: var(--color-primary);
  --color-complementary-chart: var(--color-complementary);
  
  /* Bar chart hover colors - Dark Mode (lighter versions of primary/complementary) */
  --primary-l-hover: min(100%, calc(var(--primary-l) + 15%));
  --color-primary-hover: hsl(var(--primary-h), var(--primary-s), var(--primary-l-hover));
  --comp-l-hover: min(100%, calc(var(--comp-l) + 15%));
  --color-complementary-hover: hsl(var(--comp-h), var(--comp-s), var(--comp-l-hover));
  
  /* Focus visible color - Dark Mode (darker tone for better contrast) */
  --primary-l-focus: max(0%, calc(var(--primary-l) - 20%));
  --color-primary-focus: hsl(var(--primary-h), var(--primary-s), var(--primary-l-focus));
}

[data-theme="light"] {
  /* Background colors - Light Mode */
  --background: 0 0% 98%;
  --foreground: 0 0% 9%;

  /* Card colors - Light Mode */
  --card: 0 0% 100%;
  --card-foreground: 0 0% 9%;

  /* Border and input - Light Mode */
  --border: 0 0% 90%;
  --input: 0 0% 96%;

  /* Component backgrounds - Light Mode */
  --input-bg: 0 0% 100%;
  --input-border: 0 0% 80%;
  --button-outline-bg: transparent;
  --button-outline-border: 0 0% 80%;
  --button-ghost-bg-hover: 0 0% 96%;
  --switch-unchecked-bg: 0 0% 90%;
  
  /* Toast backgrounds - Light Mode */
  --toast-default-bg: 0 0% 100%;
  --toast-default-border: 0 0% 85%;
  
  /* Text colors - Light Mode */
  --text-primary: 0 0% 9%;
  --text-secondary: 0 0% 25%;
  --text-tertiary: 0 0% 45%;
  --text-muted: 0 0% 55%;
  --text-disabled: 0 0% 65%;
  
  /* Primary color darker tone for labels in light mode (20% darker) */
  --primary-l-darker: max(0%, calc(var(--primary-l) - 20%));
  --color-primary-darker: hsl(var(--primary-h), var(--primary-s), var(--primary-l-darker));
  
  /* Bar chart base colors - Light Mode (lighter to compensate for gradient overlay) */
  --primary-l-chart: min(100%, calc(var(--primary-l) + 15%));
  --color-primary-chart: hsl(var(--primary-h), var(--primary-s), var(--primary-l-chart));
  --comp-l-chart: min(100%, calc(var(--comp-l) + 15%));
  --color-complementary-chart: hsl(var(--comp-h), var(--comp-s), var(--comp-l-chart));
  
  /* Bar chart hover colors - Light Mode (darker versions of primary/complementary) */
  --primary-l-hover: max(0%, calc(var(--primary-l) - 15%));
  --color-primary-hover: hsl(var(--primary-h), var(--primary-s), var(--primary-l-hover));
  --comp-l-hover: max(0%, calc(var(--comp-l) - 15%));
  --color-complementary-hover: hsl(var(--comp-h), var(--comp-s), var(--comp-l-hover));
  
  /* Focus visible color - Light Mode (lighter tone for better contrast) */
  --primary-l-focus: min(100%, calc(var(--primary-l) + 15%));
  --color-primary-focus: hsl(var(--primary-h), var(--primary-s), var(--primary-l-focus));
}

body {
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  font-family: system-ui, -apple-system, sans-serif;
}

/* Enhanced focus styles for accessibility */
/* Use darker tone in dark mode, lighter tone in light mode for better contrast */
*:focus-visible {
  outline: 2px solid var(--color-primary-focus);
  outline-offset: 2px;
}

/* Inputs use ring instead of outline to avoid double indicators */
input:focus-visible,
textarea:focus-visible {
  outline: none !important;
  outline-offset: 0 !important;
}

/* Smooth transitions for color changes - scoped to elements that need them */
button,
a,
[role="button"],
[role="slider"],
.card,
[class*="bg-"],
[class*="border-"],
[class*="text-"] {
  transition-property: background-color, border-color, color, transform, scale, box-shadow;
  transition-duration: 150ms;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Border radius for sticky elements with background classes to match sidebar container */
.sticky[class*="bg-"] {
  border-radius: 24px 24px 0 0;
}

/* Respect prefers-reduced-motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    transform: none !important;
  }
  
  /* Disable scale transforms for reduced motion */
  *:hover,
  *:active,
  *:focus {
    transform: none !important;
    scale: 1 !important;
  }
}

@theme {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: var(--color-primary);
  
  /* Neutral color tokens */
  --color-neutral-50: hsl(var(--neutral-50));
  --color-neutral-100: hsl(var(--neutral-100));
  --color-neutral-200: hsl(var(--neutral-200));
  --color-neutral-300: hsl(var(--neutral-300));
  --color-neutral-400: hsl(var(--neutral-400));
  --color-neutral-500: hsl(var(--neutral-500));
  --color-neutral-600: hsl(var(--neutral-600));
  --color-neutral-700: hsl(var(--neutral-700));
  --color-neutral-800: hsl(var(--neutral-800));
  --color-neutral-900: hsl(var(--neutral-900));
  --color-neutral-950: hsl(var(--neutral-950));
  
  /* Component tokens */
  --color-input-bg: hsl(var(--input-bg));
  --color-input-border: hsl(var(--input-border));
  --color-button-outline-bg: hsl(var(--button-outline-bg));
  --color-button-outline-border: hsl(var(--button-outline-border));
  --color-button-ghost-bg-hover: hsl(var(--button-ghost-bg-hover));
  --color-switch-unchecked-bg: hsl(var(--switch-unchecked-bg));
  --color-toast-default-bg: hsl(var(--toast-default-bg));
  --color-toast-default-border: hsl(var(--toast-default-border));
  
  /* Text color tokens */
  --color-text-primary: hsl(var(--text-primary));
  --color-text-secondary: hsl(var(--text-secondary));
  --color-text-tertiary: hsl(var(--text-tertiary));
  --color-text-muted: hsl(var(--text-muted));
  --color-text-disabled: hsl(var(--text-disabled));
  --color-primary-darker: var(--color-primary-darker);
  --color-primary-hover: var(--color-primary-hover);
  --color-primary-focus: var(--color-primary-focus);
  --color-complementary-hover: var(--color-complementary-hover);
}

/* Recharts bar hover styles - transitions handled by component */
.recharts-rectangle {
  transition: fill 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* Remove focus outline from recharts interactive elements */
.recharts-sector,
.recharts-sector:focus,
.recharts-sector:focus-visible,
.recharts-surface,
.recharts-surface:focus,
.recharts-surface:focus-visible {
  outline: none !important;
  outline-offset: 0 !important;
}

/* Color input - remove all outlines, borders, and shadows */
input[type="color"] {
  outline: none !important;
  outline-offset: 0 !important;
  outline-width: 0 !important;
  box-shadow: none !important;
  border: none !important;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

input[type="color"]:focus,
input[type="color"]:focus-visible,
input[type="color"]:active {
  outline: none !important;
  outline-offset: 0 !important;
  outline-width: 0 !important;
  box-shadow: none !important;
  border: none !important;
}

/* Remove borders from WebKit color swatch */
input[type="color"]::-webkit-color-swatch-wrapper {
  padding: 0 !important;
  border: none !important;
  outline: none !important;
}

input[type="color"]::-webkit-color-swatch {
  border: none !important;
  border-radius: 0 !important;
  outline: none !important;
  box-shadow: none !important;
}

/* Remove borders from Firefox color swatch */
input[type="color"]::-moz-color-swatch {
  border: none !important;
  border-radius: 0 !important;
  outline: none !important;
  box-shadow: none !important;
}

/* Ghost Scrollbar Styles */
/* WebKit browsers (Chrome, Safari, Edge) */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--foreground) / 0.15);
  border-radius: 100px;
  border: 2px solid transparent;
  background-clip: padding-box;
  transition: background 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--foreground) / 0.3);
  border: 2px solid transparent;
  background-clip: padding-box;
}

::-webkit-scrollbar-corner {
  background: transparent;
}

/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--foreground) / 0.15) transparent;
}

/* Hide Next.js dev tools portal elements */
nextjs-portal,
[nextjs-portal],
script[type="application/json"][data-nextjs-portal] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
  position: absolute !important;
  width: 0 !important;
  height: 0 !important;
  overflow: hidden !important;
  max-width: 0 !important;
  max-height: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* ===== Scrolling Card Grid - Store Display Animation ===== */

/* Container that creates the viewing window */
.scrolling-card-container {
  /* Smoother gradient fade using eased stops for natural vignette effect */
  mask-image: linear-gradient(
    to bottom,
    transparent 0%,
    rgba(0, 0, 0, 0.1) 2%,
    rgba(0, 0, 0, 0.4) 5%,
    rgba(0, 0, 0, 0.8) 8%,
    black 12%,
    black 88%,
    rgba(0, 0, 0, 0.8) 92%,
    rgba(0, 0, 0, 0.4) 95%,
    rgba(0, 0, 0, 0.1) 98%,
    transparent 100%
  );
  -webkit-mask-image: linear-gradient(
    to bottom,
    transparent 0%,
    rgba(0, 0, 0, 0.1) 2%,
    rgba(0, 0, 0, 0.4) 5%,
    rgba(0, 0, 0, 0.8) 8%,
    black 12%,
    black 88%,
    rgba(0, 0, 0, 0.8) 92%,
    rgba(0, 0, 0, 0.4) 95%,
    rgba(0, 0, 0, 0.1) 98%,
    transparent 100%
  );
}

/* The scrolling content wrapper */
.scrolling-card-content {
  animation-name: scrollVertical;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
  will-change: transform;
}

/* Vertical scroll keyframe - scrolls through 50% (first set of cards) */
@keyframes scrollVertical {
  0% {
    transform: translateY(0);
  }
  100% {
    transform: translateY(-50%);
  }
}

/* Each set of cards in the scroll - must have identical heights for seamless loop */
.scrolling-card-set {
  /* Padding creates the gap at the seam point */
  padding-top: 3rem;
  padding-bottom: 3rem;
}

/* Inner wrapper contains the actual card grid */
.scrolling-card-inner {
  /* Ensures content is contained cleanly */
}

/* Disable scroll animation when reduced motion is preferred */
@media (prefers-reduced-motion: reduce) {
  .scrolling-card-content {
    animation: none !important;
  }
}
